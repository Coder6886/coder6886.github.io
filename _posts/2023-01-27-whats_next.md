---
layout:     post
title:      ä¸€åŠ³æ°¸é€¸â€”â€”æ‰¾è§„å¾‹
subtitle:   What's Next?
date:       2023-01-27
author:     coder6886
header-img: img/post-bg-island.jpg
catalog: true
usemathjax: true
tags:
    - æ•°å­¦
---

ä¼°è®¡å¾ˆå¤šäººä¸Šå­¦æ—¶ä»£éƒ½è¢«ä¸€ä¸ªé—®é¢˜å›°æ‰°ç€ï¼š

$$

1,1,2,3,5,8,...

$$

è¿™ä¸ªæ•°åˆ—æˆ‘ä»¬éå¸¸ç†Ÿæ‚‰ã€‚â€œå…”å­æ•°åˆ—â€ï¼Œä¹Ÿç§°Fibonacciæ•°åˆ—çš„è§„å¾‹æ˜¯$F_n=F_{n-1}+F_{n-2}$

å‡å¦‚æœ‰ä¸€ä¸ªäººå°†$1,1,2,3,5,8$ç»™ä½ ï¼Œç„¶åé—®ä½ â€œè¿™ä¸ªæ•°åˆ—ä¸­çš„ä¸‹ä¸€ä¸ªæ•°æ˜¯ä»€ä¹ˆï¼ŸWhat's next??â€

å¥½å§ï¼Œä½ çŸ¥é“è¿™ä¸ªæ•°åˆ—çš„è§„å¾‹ã€‚é‚£å¦‚æœå†æ¢ä¸€ä¸ªï¼Œä½ è¿˜èƒ½çŸ¥é“è§„å¾‹å—ï¼Ÿ

ä»Šå¤©æˆ‘ä»¬å°±æ¥ä¸€åŠ³æ°¸é€¸åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

# æ•°å­¦éƒ¨åˆ†

## ç¬¬ä¸€éƒ¨åˆ†ï¼šåˆ¤æ–­
è¿˜æ˜¯æ‹¿å…”å­æ•°åˆ—åšä¾‹å­ã€‚æ¯•ç«Ÿä»Šå¹´æ˜¯å…”å¹´ğŸ˜Š

æˆ‘ä»¬æŠŠè¿™ä¸ªæ•°åˆ—å†™å¾ˆå¤šæ¬¡ï¼ˆè¦é”™å¼€å†™ï¼‰ï¼š

$$

1\quad1\quad2\quad3\quad5\quad8\qquad\qquad\\
\quad1\quad1\quad2\quad3\quad5\quad8\qquad\\
\quad\quad1\quad1\quad2\quad3\quad5\quad8\\
...

$$

æˆ‘ä»¥åå°±æŠŠè¿™ä¸€å †é”™å¼€äº†çš„æ•°åˆ—å«åšâ€œæ•°è¡¨â€

è®¾ç½®ä¸€ä¸ªè®¡æ•°å™¨kä»1å¼€å§‹

åœ¨ä¸Šé¢çš„æ•°è¡¨ä¸­éšæœºé€‰æ‹©ä¸€ä¸ª$k\times k$çš„çŸ©é˜µï¼Œæ¯”å¦‚

$$

\left[
    \begin{matrix}
    1
    \end{matrix}
\right]

$$

è®¡ç®—å®ƒçš„è¡Œåˆ—å¼ï¼Œå‘ç°ä¸æ˜¯0ï¼Œæ‰€ä»¥è®¡æ•°å™¨åŠ ä¸€ã€‚

å†é€‰æ‹©ä¸€ä¸ª$k\times k$çš„çŸ©é˜µï¼š

$$

\left[
    \begin{matrix}
    1\quad2\\
    1\quad1\\
    \end{matrix}
\right]

$$

å†è®¡ç®—è¡Œåˆ—å¼ï¼Œå‘ç°è¿˜ä¸æ˜¯é›¶ï¼Œé‚£è®¡æ•°å™¨å†åŠ ä¸€ã€‚

å†é€‰æ‹©ä¸€ä¸ª$k\times k$çš„çŸ©é˜µï¼š

$$

\left[
    \begin{matrix}
    2\quad3\quad5\\
    1\quad2\quad3\\
    1\quad1\quad2\\
    \end{matrix}
\right]

$$

è¿™å›å®ƒçš„è¡Œåˆ—å¼æ˜¯0äº†ã€‚è¿™æ„å‘³ç€ä»€ä¹ˆå‘¢ï¼Ÿ

è¿™å…¶å®æ„å‘³ç€çŸ©é˜µçš„ä¸‰è¡Œä¸­æœ‰ä¸€è¡Œå¯ä»¥è¡¨ç¤ºä¸ºå…¶ä»–ä¸¤è¡Œçš„ç»„åˆã€‚

æƒ³ä¸€ä¸‹æˆ‘ä»¬æ„é€ è¿™ä¸ªæ•°è¡¨æ—¶è¿™äº›ä¸åŒçš„è¡Œéƒ½æœ‰ä»€ä¹ˆå«ä¹‰ã€‚

æ•°è¡¨çš„ç¬¬ä¸€è¡Œçš„ç¬¬nä¸ªæ•°æ˜¯$F_n$

ç¬¬ä¸€è¡Œç¬¬nä¸ªæ•°æ­£ä¸‹æ–¹çš„ç¬¬äºŒè¡Œçš„æ•°æ˜¯$F_{n-1}$

ç¬¬ä¸€è¡Œç¬¬nä¸ªæ•°ä¸‹æ–¹ä¸¤ä¸ªæ•°æ˜¯$F_{n-2}$

å°±ä»¥n=4ä¸ºä¾‹

$$

1\quad1\quad2\quad F_{n\quad}\quad5\quad8\qquad\qquad\\
\quad1\quad1\quad F_{n-1}\quad3\quad5\quad8\qquad\\
\quad\quad1\quad F_{n-2}\quad2\quad3\quad5\quad8\\
...

$$

é‚£ä¹ˆæˆ‘ä»¬æœ€åçš„çŸ©é˜µè¡Œåˆ—å¼ä¸ºé›¶ï¼Œå…¶å®å°±åœ¨å¯¹æˆ‘ä»¬ä¼ è¾¾ä¸€ä¸ªä¿¡æ¯ï¼š

$$

F_n=x_1F_{n-1}+x_2F_{n-2}+...+x_{k-1}F_{n-k+1}

$$

å¯¹äºå…”å­æ•°åˆ—æ¥è¯´ï¼Œå®ƒä¼ è¾¾çš„ä¿¡æ¯å°±æ˜¯$F_n=x_1F_{n-1}+x_2F_{n-2}$

å…¶ä¸­$x_i$éƒ½æ˜¯ä¸‹ä¸€éƒ¨åˆ†è¦æ±‚çš„ç³»æ•°ã€‚

å¦‚æœæ‰€æœ‰è¿™æ ·çš„$k\times k$çŸ©é˜µè¡Œåˆ—å¼éƒ½æ˜¯0çš„è¯ï¼Œæˆ‘ä»¬å°±æ‰¾åˆ°äº†è§„å¾‹ã€‚

## ç¬¬äºŒéƒ¨åˆ†ï¼šè®¡ç®—

ä¸Šé¢ä¸æ˜¯é€‰äº†ä¸€ä¸ª$k\times k$çš„çŸ©é˜µå—ï¼Ÿå°†å®ƒçš„æœ€åä¸€åˆ—å»æ‰:

åŸæ¥çš„çŸ©é˜µï¼š
$$

\left[
    \begin{matrix}
    2\quad3\quad5\\
    1\quad2\quad3\\
    1\quad1\quad2\\
    \end{matrix}
\right]

$$

ç°åœ¨çš„çŸ©é˜µï¼š

$$

A=\left[
    \begin{matrix}
    2\quad3\\
    1\quad2\\
    1\quad1\\
    \end{matrix}
\right]

$$

è®¾Bä¸ºAçš„ç¬¬ä¸€è¡Œï¼š

$$

B=\left[\begin{matrix}2\quad3\end{matrix}\right]

$$

å†å°†Açš„ç¬¬ä¸€è¡Œå»æ‰ï¼š

$$

A=\left[
    \begin{matrix}
    1\quad2\\
    1\quad1\\
    \end{matrix}
\right]

$$

è¿˜è®°å¾—ä¸Šé¢çš„é‚£äº›ç³»æ•°$x_i$å—ï¼Ÿ

è®¾

$$

X=\left[
    \begin{matrix}
    x_1\\
    x_2\\
    ...\\
    x_{k-1}
    \end{matrix}
\right]

$$

é‚£æˆ‘ä»¬å¯ä»¥åˆ—å‡ºæ–¹ç¨‹$A^TX=B^T$

ä¹Ÿå°±æ˜¯

$$

F_n=x_1F_{n-1}+x_2F_{n-2}+...+x_{k-1}F_{n-k+1},\\
F_{n+1}=x_1F_n+x_2F_{n-1}+...+x_{k-1}F_{n-k+2}\\
...

$$

è§£è¿™ä¸ªæ–¹ç¨‹ï¼Œå°±å¯ä»¥å¾—åˆ°æ‰€æœ‰çš„ç³»æ•°å•¦ï¼

ä¾‹å¦‚å…”å­æ•°åˆ—ï¼š

$$

\left[
    \begin{matrix}
    1\quad1\\
    2\quad1\\
    \end{matrix}
\right]X=
\left[
    \begin{matrix}
    2\\
    3
    \end{matrix}
\right]

$$

å°±å¯ä»¥è§£å‡º

$$

X=\left[\begin{matrix}1\\1\end{matrix}\right]

$$

ä¹Ÿå°±æ˜¯$F_n=F_{n-1}+F_{n-2}$

å¤§åŠŸå‘Šæˆï¼ï¼

# å®æ“

å…¶å®å®é™…æ“ä½œçš„æ—¶å€™ä¸éœ€è¦éªŒè¯æ‰€æœ‰$k\times k$çš„çŸ©é˜µè¡Œåˆ—å¼éƒ½ä¸º0ï¼Œåªéœ€è¦éªŒè¯å·¦ä¸Šè§’åœ¨ç¬¬ä¸€è¡Œä¸Šçš„æ‰€æœ‰çŸ©é˜µå°±å¯ä»¥äº†ã€‚

ä»£ç ï¼š

```python
import numpy as np
def find_pattern(lst):
    largest_size = int(np.ceil(len(lst)/2))#æœ€å¤§å¯èƒ½çŸ©é˜µå¤§å°

    matrixsize = -1
    for i in range(1,largest_size+1):#éå†çŸ©é˜µå¤§å°

        for j in range(i-1,len(lst)-i+1):#åœ¨ç¬¬ä¸€æ’é€‰æ‹©çŸ©é˜µå·¦ä¸Šè§’ä½ç½®

            Alst = []
            for k in range(i):
                Alst.append(lst[j-k:j-k+i])#åˆ¶é€ è¡Œåˆ—å¼çŸ©é˜µ

            if abs(np.linalg.det(np.array(Alst)))>0.00001:#åˆ¤æ–­è¡Œåˆ—å¼ä¸ä¸ºé›¶

                break
        else:
            matrixsize = i#è¿™å°±æ˜¯åŸæ–‡ä¸­çš„k

            break
    if matrixsize < 0:
        raise ValueError("Not enough info")#æ²¡æœ‰è¶³å¤Ÿä¿¡æ¯
        
    A = []
    B = []
    B=lst[matrixsize-1:2*matrixsize-1]
    for i in range(1,matrixsize):
        A.append(lst[matrixsize-1-i:2*matrixsize-1-i]) #Aå»æ‰ç¬¬ä¸€è¡Œ

    A=np.array(A)
    A = A[:,:-1]#Aå»æ‰æœ€åä¸€åˆ—

    B.pop()
    B = np.array(B)
    try:
        X = np.linalg.solve(A.T,B)#ç»“æœ

    except:
        raise ValueError("Wrong input")#é¢ï¼Œè²Œä¼¼ç»™çš„è¾“å…¥æœ‰é—®é¢˜

    return X
#ä»¥ä¸‹ä¸ºè¾“å…¥è¾“å‡º

n = int(input("input the number of numbers:"))
patternlst = []
for i in range(n):
    patternlst.append(int(input("input a number:")))
X = find_pattern(patternlst)
print('F_n =',X,'â€¢','[F_{n-1},...,F_{n-'+str(X.size)+'}]')

```
æ•ˆæœï¼ˆç»“æœæ˜¯ä»¥ç‚¹ç§¯æ–¹å¼å‘ˆç°çš„ï¼‰ï¼š

![whats-next-fig1.png](/img/whats-next-fig1.png)

å¤§å®¶å¯ä»¥è¯•ç€éªŒè¯è¿™ä¸ªå¹³æ–¹æ•°è§„å¾‹æˆä¸æˆç«‹æ¬§ğŸ˜Š

![whats-next-fig2.png](/img/whats-next-fig2.png)